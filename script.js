// ควบคุมหน้าจอ (View Management)
const mainMenu = document.getElementById('main-menu');
const diceGame = document.getElementById('dice-game');
const quizGame = document.getElementById('quiz-game');
const goodbadGame = document.getElementById('goodbad-game');

const allViews = document.querySelectorAll('.game-view');

function showView(viewId) {
    allViews.forEach(view => {
        view.classList.remove('active');
    });
    document.getElementById(viewId).classList.add('active');
}

document.getElementById('goto-dice-game').addEventListener('click', () => showView('dice-game'));
document.getElementById('goto-quiz-game').addEventListener('click', () => showView('quiz-game'));
document.getElementById('goto-goodbad-game').addEventListener('click', () => showView('goodbad-game'));

document.querySelectorAll('.back-button').forEach(button => {
    button.addEventListener('click', () => showView('main-menu'));
});

// --- โค้ดส่วนของเกมลูกเต๋า ---
const dice = document.getElementById('dice');
const rollButton = document.getElementById('rollButton');

const rollRotation = {
    1: 'rotateX(0deg) rotateY(0deg)',
    2: 'rotateX(90deg)',
    3: 'rotateY(-90deg)',
    4: 'rotateY(90deg)',
    5: 'rotateX(-90deg)',
    6: 'rotateX(180deg) rotateY(0deg)'
};

rollButton.addEventListener('click', () => {
    rollButton.disabled = true;
    const randomNumber = Math.floor(Math.random() * 6) + 1;
    dice.style.transform = `rotateX(720deg) rotateY(720deg)`;
    setTimeout(() => {
        dice.style.transform = rollRotation[randomNumber];
        rollButton.disabled = false;
    }, 1500);
});

// --- โค้ดส่วนของเกมการ์ดสุ่มคำถาม ---
const quizCardInner = document.getElementById('quiz-card');
const quizQuestionSpan = document.getElementById('quiz-question');
const quizAnswerSpan = document.getElementById('quiz-answer');
const drawQuizButton = document.getElementById('draw-quiz-card');
const flipQuizButton = document.getElementById('flip-quiz-card');

const questions = [
    "ประเทศใดในทวีปอเมริกาใต้ที่มีพื้นที่ใหญ่ที่สุด?",
    "ภูเขาที่สูงที่สุดในทวีปอเมริกาใต้คือภูเขาใด?",
    "แม่น้ำที่ยาวที่สุดในทวีปอเมริกาใต้และใหญ่ที่สุดในโลกในแง่ของปริมาณน้ำคือแม่น้ำอะไร?",
    "สัตว์ประจำชาติของเปรูที่มีลักษณะคล้ายอูฐและนิยมนำขนมาทำเสื้อผ้าคือสัตว์อะไร?",
    "เมืองหลวงของประเทศบราซิลคือเมืองอะไร?",
    "ภาษาทางการของประเทศส่วนใหญ่ในทวีปอเมริกาใต้คือภาษาอะไร?",
    "ชนเผ่าพื้นเมืองที่เคยปกครองอาณาจักรอันยิ่งใหญ่ในแถบเทือกเขาแอนดีสคือชนเผ่าใด?",
    "กีฬาที่ได้รับความนิยมมากที่สุดในทวีปอเมริกาใต้คือกีฬาอะไร?",
    "เทศกาลคาร์นิวัลที่มีชื่อเสียงที่สุดของโลกจัดขึ้นที่เมืองใดในประเทศบราซิล?",
    "ประเทศที่ไม่มีทางออกสู่ทะเลในทวีปอเมริกาใต้มีกี่ประเทศ และได้แก่ประเทศใดบ้าง?",
    "ทะเลทรายที่มีชื่อเสียงและแห้งแล้งที่สุดในโลก ตั้งอยู่ในประเทศใด?",
    "ภูเขาไฟที่สูงที่สุดในทวีปอเมริกาใต้และยังคงปะทุอยู่คือภูเขาไฟอะไร?",
    "ประเทศใดเป็นแหล่งผลิตกาแฟรายใหญ่ที่สุดของโลก?",
    "สกุลเงินของประเทศอาร์เจนตินาคืออะไร?",
    "ช่องแคบที่อยู่ระหว่างทวีปอเมริกาใต้กับแอนตาร์กติกาคือช่องแคบอะไร?",
    "เมืองหลวงของประเทศโคลอมเบียคือเมืองอะไร?",
    "อาหารหลักของคนในแถบอเมริกาใต้ที่ทำจากข้าวโพดและเป็นที่นิยมคืออะไร?",
    "กลุ่มชนพื้นเมืองเผ่าใดที่อาศัยอยู่ในแถบป่าดิบชื้นแอมะซอน?",
    "ประเทศใดในทวีปอเมริกาใต้ที่เคยเป็นอาณานิคมของอังกฤษ?",
    "ยอดเขามีชื่อเสียงในเปรูที่เคยเป็นเมืองโบราณของชาวอินคาคืออะไร?",
    "ดนตรีและจังหวะการเต้นรำที่มีชื่อเสียงของอาร์เจนตินาคืออะไร?",
    "ใครคือนักฟุตบอลชื่อดังของอาร์เจนตินาที่ถูกขนานนามว่าเป็น 'เสือเตี้ย'?",
    "ประเทศที่ติดกับช่องแคบมาเจลลันและปลายสุดของทวีปคือประเทศใด?",
    "ชื่อเรียกแม่น้ำปารานา, แม่น้ำปารากวัย, และแม่น้ำอุรุกวัยรวมกันเรียกว่าอะไร?",
    "ดอกไม้ประจำชาติของโคลอมเบียคือดอกอะไร?",
    "ประเทศใดในทวีปอเมริกาใต้ที่เคยเป็นส่วนหนึ่งของสเปนและใช้ภาษาโปรตุเกสเป็นหลัก?",
    "สัตว์ประจำชาติของชิลีคือสัตว์อะไร?",
    "ประธานาธิบดีคนแรกของบราซิลที่มาจากการเลือกตั้งตามระบอบประชาธิปไตยคือใคร?",
    "กลุ่มเกาะที่มีสัตว์ป่าหายากและเป็นแรงบันดาลใจในการคิดทฤษฎีวิวัฒนาการของชาร์ลส์ ดาร์วิน คือเกาะใด?",
    "เครื่องดื่มประเภทชาที่มีชื่อเสียงของประเทศอาร์เจนตินาคืออะไร?",
    "ประเทศใดในทวีปอเมริกาใต้ที่มีพื้นที่เล็กที่สุด?",
    "เมืองหลวงของประเทศเวเนซุเอลาคือเมืองอะไร?",
    "สินค้าส่งออกหลักของประเทศโคลอมเบียคืออะไร?",
    "มหาเศรษฐีผู้ทรงอิทธิพลจากประเทศโคลอมเบียที่ถูกกล่าวหาว่าเป็นเจ้าพ่อค้ายาเสพติดคือใคร?",
    "ทะเลสาบน้ำเค็มที่ใหญ่ที่สุดในทวีปอเมริกาใต้คือทะเลสาบใด?",
    "ชาติใดในทวีปอเมริกาใต้ที่ได้ชื่อว่าเป็น 'ดินแดนแห่งไฟ' หรือ 'Tierra del Fuego'?",
    "สกุลเงินของประเทศเปรูคืออะไร?",
    "ซากอารยธรรมโบราณของชนเผ่าโมเช (Moche) ตั้งอยู่ในประเทศใด?",
    "ศาสนาหลักที่ชาวอเมริกาใต้นับถือคือศาสนาอะไร?",
    "พืชเศรษฐกิจที่สำคัญของประเทศชิลีคืออะไร?",
    "ชาติใดในทวีปอเมริกาใต้ที่เคยเป็นอาณานิคมของโปรตุเกส?",
    "ดนตรีและจังหวะการเต้นรำที่มีชื่อเสียงของประเทศบราซิลคืออะไร?",
    "ประเทศใดเป็นผู้ผลิตน้ำมันและก๊าซธรรมชาติรายใหญ่ในทวีปอเมริกาใต้?",
    "เมืองหลวงของประเทศอุรุกวัยคือเมืองอะไร?",
    "สถาปัตยกรรมที่มีชื่อเสียงของบราซิลที่มีรูปปั้นพระคริสต์ผู้ไถ่ (Christ the Redeemer) ตั้งอยู่บนยอดเขาคือเมืองใด?",
    "การปกครองในประเทศส่วนใหญ่ของทวีปอเมริกาใต้เป็นระบอบใด?",
    "สัตว์ที่ใช้เป็นพาหนะในการเดินทางและบรรทุกของในเทือกเขาแอนดีสคือสัตว์อะไร?",
    "ประเทศใดที่ได้ชื่อว่าเป็น 'แหล่งกำเนิดมันฝรั่ง'?",
    "อาหารประจำชาติของประเทศชิลีที่เป็นอาหารทะเลคืออะไร?",
    "ประเทศใดในทวีปอเมริกาใต้ที่เคยเป็นส่วนหนึ่งของจักรวรรดิอินคา?",
    "สัตว์ประจำชาติของบราซิลคืออะไร?",
    "เมืองหลวงของประเทศเอกวาดอร์คือเมืองอะไร?",
    "แนวปะการังที่มีชื่อเสียงของประเทศบราซิลคืออะไร?",
    "ประเทศที่มีชายฝั่งทะเลแปซิฟิกยาวที่สุดในทวีปอเมริกาใต้คือประเทศใด?",
    "ภาษาสเปนที่ใช้ในประเทศต่างๆ ในทวีปอเมริกาใต้มีความแตกต่างกันอย่างไร?",
    "นักเขียนชาวโคลอมเบียที่ได้รับรางวัลโนเบลสาขาวรรณกรรมและมีผลงานชิ้นเอกคือ 'หนึ่งร้อยปีแห่งความโดดเดี่ยว' คือใคร?",
    "ประเทศใดในทวีปอเมริกาใต้ที่อยู่ในซีกโลกเหนือ?",
    "สกุลเงินของประเทศชิลีคืออะไร?",
    "ชนพื้นเมืองที่อาศัยอยู่ในแถบแอมะซอนและมีวัฒนธรรมที่เป็นเอกลักษณ์คือชนเผ่าอะไร?",
    "ประเทศใดที่มีชื่อเสียงในการผลิตไวน์ชั้นดี?",
    "เมืองหลวงของประเทศโบลิเวียคือเมืองอะไร?",
    "ประเทศที่เคยเป็นส่วนหนึ่งของ 'มหาโคลอมเบีย' คือประเทศใดบ้าง?",
    "สัตว์ประจำชาติของอุรุกวัยคืออะไร?",
    "พืชเศรษฐกิจที่สำคัญของประเทศอาร์เจนตินาคืออะไร?",
    "การระบาดของโรคไข้เหลืองในทวีปอเมริกาใต้ครั้งแรกเกิดขึ้นที่ไหน?",
    "ประเทศใดในทวีปอเมริกาใต้ที่เป็นเกาะและมีประชากรน้อยที่สุด?",
    "เมืองหลวงของประเทศปารากวัยคือเมืองอะไร?",
    "เหมืองเงินที่ใหญ่ที่สุดในอเมริกาใต้ตั้งอยู่ที่ไหน?",
    "ศาสนาหลักของประเทศส่วนใหญ่ในทวีปอเมริกาใต้คืออะไร?",
    "ประเทศใดที่ไม่มีชายฝั่งทะเลแปซิฟิก?",
    "สัตว์ประจำชาติของปารากวัยคืออะไร?",
    "เมืองหลวงของประเทศเปรูคือเมืองอะไร?",
    "ภูเขาไฟที่ยังคงปะทุอยู่ในประเทศเอกวาดอร์คือภูเขาไฟอะไร?",
    "พืชเศรษฐกิจที่สำคัญของประเทศบราซิลคืออะไร?",
    "ชนพื้นเมืองที่อาศัยอยู่ในแถบป่าแอมะซอนและยังมีวิถีชีวิตดั้งเดิมคือชนเผ่าอะไร?",
    "ใครคือนักการเมืองที่มีชื่อเสียงของบราซิลที่เคยเป็นประธานาธิบดีและถูกจำคุกในข้อหาคอร์รัปชัน?",
    "ประเทศใดที่เคยเป็นอาณานิคมของฝรั่งเศส?",
    "เมืองหลวงของประเทศซูรินาเมคือเมืองอะไร?",
    "พืชเศรษฐกิจที่สำคัญของประเทศเวเนซุเอลาคืออะไร?",
    "สกุลเงินของประเทศโคลอมเบียคืออะไร?",
    "ใครคือนักสำรวจชาวโปรตุเกสคนแรกที่เดินทางมายังบราซิล?",
    "ประเทศใดในทวีปอเมริกาใต้ที่เคยเป็นอาณานิคมของเนเธอร์แลนด์?",
    "เมืองหลวงของประเทศกายอานาคือเมืองอะไร?",
    "สกุลเงินของประเทศอุรุกวัยคืออะไร?",
    "สัตว์ที่มีความสามารถในการปีนป่ายบนภูเขาและมีขนหนาแน่นคือสัตว์อะไร?",
    "ประเทศใดที่มีชื่อเสียงในการผลิตถั่วเหลือง?",
    "เมืองหลวงของประเทศอาร์เจนตินาคือเมืองอะไร?",
    "สัตว์ประจำชาติของเอกวาดอร์คืออะไร?",
    "ประเพณีและวัฒนธรรมของชนพื้นเมืองที่บูชาดวงอาทิตย์คือชนเผ่าอะไร?",
    "ประเทศใดในทวีปอเมริกาใต้ที่มีชายฝั่งติดกับมหาสมุทรแอตแลนติกและทะเลแคริบเบียน?",
    "พืชเศรษฐกิจที่สำคัญของประเทศปารากวัยคืออะไร?",
    "สกุลเงินของประเทศบราซิลคืออะไร?",
    "เมืองหลวงของประเทศชิลีคือเมืองอะไร?",
    "แหล่งอารยธรรมที่เก่าแก่ที่สุดในอเมริกาใต้คือแหล่งอารยธรรมอะไร?",
    "ประเทศใดในทวีปอเมริกาใต้ที่มีประชากรมากที่สุด?",
    "สกุลเงินของประเทศโบลิเวียคืออะไร?",
    "นักการเมืองที่มีชื่อเสียงของอาร์เจนตินาที่เคยเป็นประธานาธิบดีและมีบทบาทสำคัญในการฟื้นฟูประชาธิปไตยคือใคร?",
    "ประเทศที่มีชื่อเสียงในการทำผ้าไหมและสิ่งทอจากขนสัตว์คือประเทศใด?",
    "สัตว์ประจำชาติของโคลอมเบียคืออะไร?",
    "ประเทศใดในทวีปอเมริกาใต้ที่มีชื่อเสียงในการผลิตน้ำมัน?"
];

const answers = [
    "บราซิล",
    "อากองกากัว (Aconcagua)",
    "แม่น้ำแอมะซอน",
    "อัลปากา (Alpaca)",
    "บราซิเลีย (Brasília)",
    "ภาษาสเปน",
    "อินคา (Inca)",
    "ฟุตบอล",
    "รีโอเดจาเนโร (Rio de Janeiro)",
    "2 ประเทศ คือ โบลิเวียและปารากวัย",
    "ชิลี (ทะเลทรายอาตากามา)",
    "ภูเขาไฟโอโจสเดลซาลาโด (Ojos del Salado)",
    "บราซิล",
    "เปโซ (Peso)",
    "ช่องแคบเดรค (Drake Passage)",
    "โบโกตา (Bogotá)",
    "เอ็มปานาดา (Empanada)",
    "ยาโนมามิ (Yanomami)",
    "กายอานา (Guyana)",
    "มาชูปิกชู (Machu Picchu)",
    "แทงโก (Tango)",
    "ดีเอโก มาราโดนา (Diego Maradona)",
    "ชิลี",
    "ลุ่มแม่น้ำปลาตา (La Plata Basin)",
    "ดอกกล้วยไม้",
    "เอกวาดอร์",
    "กวางฮวมุล (Huemul)",
    "จูเซปเป ฟอร์ตาโต (Giuseppe Fortunato)",
    "หมู่เกาะกาลาปาโกส (Galápagos Islands)",
    "มาเต (Mate)",
    "ซูรินาเม (Suriname)",
    "การากัส (Caracas)",
    "กาแฟ",
    "ปาโบล เอสโกบาร์ (Pablo Escobar)",
    "ทะเลสาบมาลากัสโต (Mar Chiquita) ในอาร์เจนตินา",
    "ชิลี",
    "ซอล (Sol)",
    "เปรู",
    "คริสต์ศาสนา นิกายโรมันคาทอลิก",
    "องุ่น",
    "บราซิล",
    "แซมบ้า (Samba)",
    "เวเนซุเอลา",
    "มอนเตวิเดโอ (Montevideo)",
    "รีโอเดจาเนโร (Rio de Janeiro)",
    "สาธารณรัฐ",
    "ลามา (Llama)",
    "เปรู",
    "เซวิเช (Ceviche)",
    "โบลิเวีย",
    "นกกระเรียนคอแดง (Red-necked crane)",
    "กีโต (Quito)",
    "อะโบรา (Abrolhos)",
    "ชิลี",
    "มีสำเนียงและคำศัพท์ที่แตกต่างกัน",
    "กาเบรียล การ์เซีย มาร์เกซ (Gabriel García Márquez)",
    "โคลอมเบีย, เวเนซุเอลา, กายอานา, ซูรินาเม, เฟรนช์เกียนา",
    "เปโซชิลี (Chilean Peso)",
    "ยาโนมามิ (Yanomami)",
    "ชิลีและอาร์เจนตินา",
    "ซูเกร (Sucre) และ ลาปาซ (La Paz)",
    "โคลอมเบีย, เอกวาดอร์, ปานามา, เวเนซุเอลา",
    "นกชูร์ริน่า (Churriná bird)",
    "ถั่วเหลือง",
    "บราซิล",
    "เฟรนช์เกียนา",
    "อาซุนซิออน (Asunción)",
    "เมืองโปโตซี (Potosí) ในโบลิเวีย",
    "คริสต์ศาสนา นิกายโรมันคาทอลิก",
    "ปารากวัย, โบลิเวีย",
    "สุนัขจิ้งจอกปารากวัย (Paraguayan Fox)",
    "ลิมา (Lima)",
    "ภูเขาไฟโคโตปักซี (Cotopaxi)",
    "กาแฟ",
    "มารูโบ (Marubo)",
    "ลูอิส อินาซิโอ ลูลา ดา ซิลวา (Luiz Inácio Lula da Silva)",
    "เฟรนช์เกียนา (French Guiana)",
    "พารามาริโบ (Paramaribo)",
    "น้ำมันและก๊าซธรรมชาติ",
    "เปโซโคลอมเบีย (Colombian Peso)",
    "เปโดร อัลวาเรส คาบรัล (Pedro Álvares Cabral)",
    "ซูรินาเม",
    "จอร์จทาวน์ (Georgetown)",
    "เปโซอุรุกวัย (Uruguayan Peso)",
    "ลามา (Llama)",
    "บราซิลและอาร์เจนตินา",
    "บัวโนสไอเรส (Buenos Aires)",
    "นกอินทรี (Andean Condor)",
    "อินคา (Inca)",
    "โคลอมเบีย, เวเนซุเอลา, บราซิล",
    "ถั่วเหลือง",
    "เรอัล (Real)",
    "ซานติอาโก (Santiago)",
    "การัล-ซูเป (Caral-Supe) ในเปรู",
    "บราซิล",
    "โบลิเวียโน (Boliviano)",
    "อัลฟอนซิน (Raúl Alfonsín)",
    "เปรู",
    "นกอินทรี (Andean Condor)",
    "เวเนซุเอลา"
];

let currentCardIndex = -1;

drawQuizButton.addEventListener('click', () => {
    drawQuizButton.disabled = true;
    flipQuizButton.disabled = true;

    quizCardInner.classList.remove('flipped');

    setTimeout(() => {
        currentCardIndex = Math.floor(Math.random() * questions.length);
        quizQuestionSpan.textContent = questions[currentCardIndex];
        quizAnswerSpan.textContent = answers[currentCardIndex];
        drawQuizButton.disabled = false;
        flipQuizButton.disabled = false;
    }, 600);
});

flipQuizButton.addEventListener('click', () => {
    quizCardInner.classList.toggle('flipped');
});

// --- โค้ดส่วนของเกมการ์ดดี/ร้าย ---
const goodbadCardInner = document.getElementById('goodbad-card-inner');
const goodbadCardBack = document.getElementById('goodbad-card-back');
const goodbadText = document.getElementById('goodbad-text');
const drawGoodbadButton = document.getElementById('draw-goodbad-card');

const weightedNumbers = [1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 4, 4, 5];

function getRandomWeightedNumber() {
    const randomIndex = Math.floor(Math.random() * weightedNumbers.length);
    return weightedNumbers[randomIndex];
}

drawGoodbadButton.addEventListener('click', () => {
    drawGoodbadButton.disabled = true;
    goodbadCardInner.classList.remove('flipped');
    goodbadCardBack.classList.remove('good', 'bad');

    setTimeout(() => {
        const isGood = Math.random() < 0.7;
        const move = getRandomWeightedNumber();

        if (isGood) {
            goodbadCardBack.classList.add('good');
            goodbadText.textContent = `การ์ดดี! คุณได้เดินหน้า ${move} ช่อง`;
        } else {
            goodbadCardBack.classList.add('bad');
            goodbadText.textContent = `การ์ดร้าย! คุณได้ถอยหลัง ${move} ช่อง`;
        }
        goodbadCardInner.classList.add('flipped');
        drawGoodbadButton.disabled = false;
    }, 600);
});
